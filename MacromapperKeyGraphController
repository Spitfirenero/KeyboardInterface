from PySide6.QtCore import Signal, QObject, Slot
from PySide6.QtWidgets import QGraphicsView, QGraphicsScene

from MacroMapperKeyGraphItem import MacroMapperKeyGraphItem


class MacroMapperKeyGraphController(QObject):

    keySelected = Signal(MacroMapperKeyGraphItem)

    __currentlySelected: MacroMapperKeyGraphItem = None

    __scene: QGraphicsScene
    __view: QGraphicsView

    def __init__(self) -> None:
        super().__init__()

        self.__scene = QGraphicsScene()
        self.__view = QGraphicsView()

    @Slot(MacroMapperKeyGraphItem)
    def selected(self, item: MacroMapperKeyGraphItem) -> None:
        self.keySelected.emit(item)

        if self.__currentlySelected is not None:
            self.__currentlySelected.setSelected(False)
        
        self.__currentlySelected = item

    def getView(self) -> QGraphicsView:
        return self.__view
